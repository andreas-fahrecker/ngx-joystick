{"version":3,"file":"ngx-joystick.mjs","sources":["../../../projects/ngx-joystick/src/lib/ngx-joystick.component.ts","../../../projects/ngx-joystick/src/lib/ngx-joystick.module.ts","../../../projects/ngx-joystick/src/public-api.ts","../../../projects/ngx-joystick/src/ngx-joystick.ts"],"sourcesContent":["import { Component, OnInit, Output, EventEmitter, Input, ElementRef, OnDestroy, ViewChild, AfterViewInit } from '@angular/core';\nimport * as nipplejs from 'nipplejs';\nimport { fromEvent, Subscription } from 'rxjs';\n\nexport interface JoystickEvent {\n  event: nipplejs.EventData;\n  data: nipplejs.JoystickOutputData;\n}\n\n@Component({\n  selector: 'ngx-joystick',\n  template: `\n  <div #joystickContainer style=\"width: 100%; height: 100%\" id=\"static\"></div>\n  `,\n  styles: [],\n})\nexport class NgxJoystickComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('joystickContainer') joystickContainer: ElementRef;\n\n  @Input() options: nipplejs.JoystickManagerOptions;\n\n  @Output() move = new EventEmitter<JoystickEvent>();\n  @Output() start = new EventEmitter<JoystickEvent>();\n  @Output() end = new EventEmitter<JoystickEvent>();\n  @Output() dir = new EventEmitter<JoystickEvent>();\n  @Output() dirUp = new EventEmitter<JoystickEvent>();\n  @Output() dirDown = new EventEmitter<JoystickEvent>();\n  @Output() dirLeft = new EventEmitter<JoystickEvent>();\n  @Output() dirRight = new EventEmitter<JoystickEvent>();\n  @Output() plain = new EventEmitter<JoystickEvent>();\n  @Output() plainUp = new EventEmitter<JoystickEvent>();\n  @Output() plainDown = new EventEmitter<JoystickEvent>();\n  @Output() plainLeft = new EventEmitter<JoystickEvent>();\n  @Output() plainRight = new EventEmitter<JoystickEvent>();\n\n  manager: nipplejs.JoystickManager;\n\n  private interval: number;\n  private touchMoveSubscription: Subscription = new Subscription();\n\n  constructor(private el: ElementRef) {\n  }\n\n  ngOnInit() {\n    this.interval = window.setInterval(() => {\n      if (\n        this.joystickContainer &&\n        this.joystickContainer.nativeElement.clientWidth &&\n        this.joystickContainer.nativeElement.clientHeight\n      ) {\n        if (!this.options) {\n            this.options = this.getDefaultOptions();\n        } else {\n            this.options.zone = this.el.nativeElement;\n        }\n        this.manager = nipplejs.create(this.options);\n        this.setupEvents();\n\n        window.clearInterval(this.interval);\n      }\n    }, 100);\n  }\n\n  ngOnDestroy() {\n    window.clearInterval(this.interval);\n    this.manager.destroy();\n    this.touchMoveSubscription.unsubscribe();\n  }\n\n  ngAfterViewInit() {\n    this.touchMoveSubscription = fromEvent(this.el.nativeElement, 'touchmove').subscribe((event: TouchEvent) => {\n      event.preventDefault();\n      event.stopPropagation();\n    });\n  }\n\n  private getDefaultOptions(): nipplejs.JoystickManagerOptions {\n    const options: nipplejs.JoystickManagerOptions = {\n      zone: this.el.nativeElement,\n      mode: 'static',\n      position: { left: '50%', top: '50%' },\n      color: 'blue'\n    };\n    return options;\n  }\n\n  private emitEvent(event: any, emitter: EventEmitter<any>) {\n    const joystickEvent: JoystickEvent = { event: event.event, data: event.data };\n    emitter.emit(joystickEvent);\n  }\n\n  private setupEvents() {\n    this.manager.on('move', (event, data) => { this.emitEvent({event, data}, this.move); });\n    this.manager.on('start', (event, data) => { this.emitEvent({event, data}, this.start); });\n    this.manager.on('end', (event, data) => { this.emitEvent({event, data}, this.end); });\n    this.manager.on('dir', (event, data) => { this.emitEvent({event, data}, this.dir); });\n    this.manager.on('dir:up', (event, data) => { this.emitEvent({event, data}, this.dirUp); });\n    this.manager.on('dir:down', (event, data) => { this.emitEvent({event, data}, this.dirDown); });\n    this.manager.on('dir:left', (event, data) => { this.emitEvent({event, data}, this.dirLeft); });\n    this.manager.on('dir:right', (event, data) => { this.emitEvent({event, data}, this.dirRight); });\n    this.manager.on('plain', (event, data) => { this.emitEvent({event, data}, this.plain); });\n    this.manager.on('plain:up', (event, data) => { this.emitEvent({event, data}, this.plainUp); });\n    this.manager.on('plain:down', (event, data) => { this.emitEvent({event, data}, this.plainDown); });\n    this.manager.on('plain:left', (event, data) => { this.emitEvent({event, data}, this.plainLeft); });\n    this.manager.on('plain:right', (event, data) => { this.emitEvent({event, data}, this.plainRight); });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgxJoystickComponent } from './ngx-joystick.component';\n\n@NgModule({\n  declarations: [NgxJoystickComponent],\n  imports: [\n  ],\n  exports: [NgxJoystickComponent]\n})\nexport class NgxJoystickModule { }\n","/*\n * Public API Surface of ngx-joystick\n */\n\nexport * from './lib/ngx-joystick.component';\nexport * from './lib/ngx-joystick.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}